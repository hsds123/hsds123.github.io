<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="HSDS123" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="HSDS123">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;">
<meta property="og:site_name" content="HSDS123">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>HSDS123</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">HSDS123</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/Firefox-add-password/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/Firefox-add-password/" class="post-title-link" itemprop="url">Firefox手动添加密码</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-02 20:00:00" itemprop="dateCreated datePublished" datetime="2018-06-02T20:00:00+08:00">2018-06-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 13:42:00" itemprop="dateModified" datetime="2019-11-23T13:42:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>FireFox手动添加密码<br>以前网页记住密码，但是由于网页改版等原因，无法保存密码了，把表单的<code>autocomplete=&#39;off&#39;</code>改为<code>autocomplete=&#39;on&#39;</code>也不行<br>以下为网上查的资料，简单来讲，就是通过网页审查元素来修改网页html代码，添加一个新的用户名密码框，然后在自己的输入框里提交就可以在浏览器里记住密码了，之后对原始页面也适用。</p>
<blockquote>
<p>Manually add username/password to Saved Password list<br><a href="https://superuser.com/questions/781639/manually-add-username-password-to-saved-password-list" target="_blank" rel="noopener">https://superuser.com/questions/781639/manually-add-username-password-to-saved-password-list</a></p>
</blockquote>
<blockquote>
<p>If you’re a developer with 3 minutes to spare, this is how to do it without installing another add-on.</p>
<ol>
<li>On the login page, Inspect Element the username and password fields and take note of their name attributes. For example on Khan Academy, that would be identifier for the username and password for the password.</li>
<li>Inspect Element somewhere on the page. Find a small div or so, that’s easiest.</li>
<li>Right click the element in your inspector and choose Edit As HTML.</li>
<li>Add the following HTML:</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=post&gt;</span><br><span class="line">  &lt;input name=identifier&gt;</span><br><span class="line">  &lt;input type=password name=password&gt;</span><br><span class="line">  &lt;input type=submit&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Replace the names (identifier and password) with the names from step #1. Note that you should not replace type=password, only the name=password field!<br>5.    Enter your credentials on the page in this form and hit submit. Firefox will now prompt you to save the credentials. The website will probably burp up an error or ignore the request or something, but we don’t care about that.<br>Why does this work? Some sites deliberately do something funny to prevent you saving the password (the browser’s remember password feature is often seen as insecure); other sites just have a funny form mangled beyond recognition for Firefox. Adding this simple form makes Firefox detect it and when you enter your credentials, it will prompt you to save them.<br>Now on the login page, as long as the fields actually have name attributes at all I guess (and it probably needs to be wrapped in a <code>&lt;form&gt;</code> too, I don’t know), Firefox will typically recognize the fields and be able to fill them for you.</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/ipv6-temporary-address/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/ipv6-temporary-address/" class="post-title-link" itemprop="url">IPv6临时地址（隐私模式）</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-02 20:00:00" itemprop="dateCreated datePublished" datetime="2018-05-02T20:00:00+08:00">2018-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 12:42:00" itemprop="dateModified" datetime="2019-11-23T12:42:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>#参考资料：<br><a href="https://support.cumulusnetworks.com/hc/en-us/articles/216003057-Configuring-IPv6-Addresses-Other-Than-Static-in-Cumulus-Linux#configuring_an_interface_to_use_ipv6_temporary_addresses" target="_blank" rel="noopener">https://support.cumulusnetworks.com/hc/en-us/articles/216003057-Configuring-IPv6-Addresses-Other-Than-Static-in-Cumulus-Linux#configuring_an_interface_to_use_ipv6_temporary_addresses</a></p>
<p><a href="http://www.cnblogs.com/makefile/p/5040615.html" target="_blank" rel="noopener">http://www.cnblogs.com/makefile/p/5040615.html</a><br>#查看ipv6地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip -6 addr show ppp0  #显示出指定接口的ipv6</span><br><span class="line">ip -6 addr del 地址A dev ppp0 #或者使用 ifconfig 接口 inet6 del v6地址</span><br></pre></td></tr></table></figure>
<p>查看ipv6临时地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -a | grep tempaddr</span><br><span class="line">    net.ipv6.conf.all.use_tempaddr = 2</span><br><span class="line">    net.ipv6.conf.default.use_tempaddr = 2</span><br><span class="line">    net.ipv6.conf.eth0.use_tempaddr = 2</span><br><span class="line">    net.ipv6.conf.lo.use_tempaddr = 2</span><br></pre></td></tr></table></figure>
<p>修改配置文件：编辑 <code>/etc/sysctl.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">net.ipv6.conf.default.accept_ra=2</span><br><span class="line">net.ipv6.conf.all.accept_ra=2</span><br><span class="line">net.ipv6.conf.default.use_tempaddr=0</span><br><span class="line">net.ipv6.conf.all.use_tempaddr=0</span><br></pre></td></tr></table></figure>

<p>如果要让刚写入的立即也生效可以执行以下<code>sysctl -p</code><br>如果只需要临时生效，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -w net.ipv6.conf.swp1s0.accept_ra=2</span><br><span class="line">sudo sysctl -w net.ipv6.conf.swp1s0.use_tempaddr=2</span><br></pre></td></tr></table></figure>

<h1 id="Ubuntu-18-04-Systemd-networkd"><a href="#Ubuntu-18-04-Systemd-networkd" class="headerlink" title="Ubuntu 18.04 Systemd-networkd"></a>Ubuntu 18.04 Systemd-networkd</h1><p>不知什么原因，以上设置在我Ubuntu 18.04上无效，查了一些资料，最终解决过程如下：<br><a href="https://netplan.io/reference" target="_blank" rel="noopener">https://netplan.io/reference</a></p>
<ol>
<li>编辑netplan的网络配置<br>首先尝试更改<code>nano /etc/netplan/10-ens3.yaml</code><br><code>nano /etc/netplan/10-ens3.yaml</code><br>添加<br><code>ipv6-privacy: yes</code><br>然后尝试应用<br><code>netplan try</code><br>提示<code>unknown key IPv6PrivacyExtensions</code>， 重启结果无法上网了</li>
<li>编剧systemd的网络配置<br><a href="https://wiki.archlinux.org/index.php/IPv6_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#systemd-networkd" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/IPv6_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#systemd-networkd</a></li>
</ol>
<p><a href="https://www.freedesktop.org/software/systemd/man/systemd.network.html" target="_blank" rel="noopener">https://www.freedesktop.org/software/systemd/man/systemd.network.html</a></p>
<blockquote>
<p>The .network files are read from the files located in the system network directory /usr/lib/systemd/network, the volatile runtime network directory /run/systemd/network and the local administration network directory /etc/systemd/network.<br>[Network] Section Options<br>IPv6PrivacyExtensions=<br>Configures use of stateless temporary addresses that change over time (see RFC 4941, Privacy Extensions for Stateless Address Autoconfiguration in IPv6). Takes a boolean or the special values “prefer-public” and “kernel”. When true, enables the privacy extensions and prefers temporary addresses over public addresses. When “prefer-public”, enables the privacy extensions, but prefers public addresses over temporary addresses. When false, the privacy extensions remain disabled. When “kernel”, the kernel’s default setting will be left in place. Defaults to “no”.</p>
</blockquote>
<p>编辑（创建）/etc/systemd/network/10-netplan-ens3.network<br><code>nano /etc/systemd/network/10-netplan-ens3.network</code><br>写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Match]</span><br><span class="line">Name=ens3</span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">DHCP=ipv4</span><br><span class="line">LinkLocalAddressing=ipv6</span><br><span class="line">IPv6PrivacyExtensions=kernel</span><br><span class="line"></span><br><span class="line">[DHCP]</span><br><span class="line">UseMTU=true</span><br><span class="line">RouteMetric=100</span><br></pre></td></tr></table></figure>
<p>注意，以上<code>DHCP=ipv4</code>也必不可少，<strong>否则无法获得ipv4地址</strong>！</p>
<p>保存之后重启网络服务（不行就重启系统）：<br><code>systemctl restart systemd-networkd</code></p>
<p>问题得以解决。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/VPS-SS-libev/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/VPS-SS-libev/" class="post-title-link" itemprop="url">Shadowsocks-libev</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-02 20:00:00" itemprop="dateCreated datePublished" datetime="2017-05-02T20:00:00+08:00">2017-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 11:42:00" itemprop="dateModified" datetime="2019-11-23T11:42:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>对于Debian和Ubuntu，可以直接从官方源安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install shadowsocks-libev</span><br></pre></td></tr></table></figure>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>配置文件为：<code>/etc/shadowsocks-libev/config.json</code>，格式说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:[&quot;::&quot;, &quot;0.0.0.0&quot;],</span><br><span class="line">    &quot;server_port&quot;:12345,</span><br><span class="line">    &quot;password&quot;:&quot;password&quot;,</span><br><span class="line">    &quot;ipv6_first&quot;:true,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中：<br>server：主机域名或者IP地址，尽量填IP<br>server_port：服务器监听端口<br>password：密码<br>method：加密方式 所有支持的加密方式请参照官方文档。这里本人推荐只使用支持AEAD的加密方式，包括以下五种： aes-128-gcm/aes-192-gcm/aes-256-gcm/chacha20-ietf-poly1305/xchacha20-ietf-poly1305<br>timeout：连接超时时间，单位秒。要适中。<br>注意引号。</p>
<h1 id="控制启动、停止、重启："><a href="#控制启动、停止、重启：" class="headerlink" title="控制启动、停止、重启："></a>控制启动、停止、重启：</h1><p>由于目前大部分新的linux发行版都已经支持systemd，因此，可以统一使用如下命令<br><code>systemctl start shadowsocks-libev</code><br>需要前台运行时候，执行ss-server命令运行，具体用法如下：<br><code>ss-server -c /etc/shadowsocks-libev/config.json -u</code><br>查看shadowsocks是否正确启动并监听相应端口，看到有<code>ss-server</code>进程<code>LISTEN</code>正确的端口就表示成功：<br><code>netstat -lnp | grep ss-server</code><br>设置开机启动Shadowsocks-libev(默认已设置好)：<br><code>sudo systemctl enable shadowsocks-libev</code><br>查看服务状态及日志：<br><code>systemctl status shadowsocks-libev</code><br>使用journalctl查看日志：可以使用–since和–until选项过滤任意时间限制，这些限制分别显示给定时间之前或之后的条目。要显示特定数量的记录，大家可以使用-n选项。也许最有用的过滤方式是你感兴趣的单位。我们可以使用这个-u选项来过滤。例如，查看httpd服务的日志信息journalctl -u httpd.service</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u shadowsocks-libev --since yesterday</span><br><span class="line">journalctl -u shadowsocks-libev --since &quot;2017-03-01&quot;</span><br><span class="line">journalctl -u shadowsocks-libev –n 20</span><br></pre></td></tr></table></figure>

<h1 id="服务器优化"><a href="#服务器优化" class="headerlink" title="服务器优化"></a>服务器优化</h1><p>参考 shadowsocks</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/VPS-SS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/VPS-SS/" class="post-title-link" itemprop="url">Ubuntu 16.04下Python3 Shadowsocks服务器端安装及优化</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-02-02 20:00:00" itemprop="dateCreated datePublished" datetime="2017-02-02T20:00:00+08:00">2017-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 10:42:00" itemprop="dateModified" datetime="2019-11-23T10:42:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://www.polarxiong.com/archives/Ubuntu-16-04%E4%B8%8BShadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E5%8C%96.html" target="_blank" rel="noopener">Ubuntu 16.04下Shadowsocks服务器端安装及优化</a></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本教程旨在提供简明的Ubuntu 16.04下安装服务器端Shadowsocks。不同于Ubuntu 16.04之前的教程，本文抛弃initd，转而使用Ubuntu 16.04支持的Systemd管理Shadowsocks的启动与停止，显得更为便捷。优化部分包括BBR、TCP Fast Open以及吞吐量优化。<br>本教程仅适用于Ubuntu 16.04及之后的版本，基于Python 3，支持IPv6。<br>本教程使用Python 3为载体，因Python 3对应的包管理器pip3并未预装，首先安装pip3：</p>
<h1 id="安装服务器端"><a href="#安装服务器端" class="headerlink" title="安装服务器端"></a>安装服务器端</h1><p>安装pip：<br><code>sudo apt install python3-pip</code><br>安装Shadowsocks：<br>因Shadowsocks作者不再维护pip中的Shadowsocks（定格在了2.8.2），我们使用下面的命令来安装最新版的Shadowsocks：<br><code>pip3 install https://github.com/shadowsocks/shadowsocks/archive/master.zip</code><br>安装完成后可以使用下面这个命令查看Shadowsocks版本：<br><code>sudo ssserver --version</code><br>目前会显示“Shadowsocks 3.0.0”。<br>创建配置文件<br>创建Shadowsocks配置文件所在文件夹：<br><code>sudo mkdir /etc/shadowsocks</code><br>然后创建配置文件：<br><code>sudo nano /etc/shadowsocks/config.json</code><br>复制粘贴如下内容（注意修改密码“password”）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;::&quot;,</span><br><span class="line">    &quot;server_port&quot;:8388,</span><br><span class="line">    &quot;local_address&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;password&quot;:&quot;mypassword&quot;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后按Ctrl + O保存文件，Ctrl + X退出。<br>然后来测试下Shadowsocks能不能正常工作了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c /etc/shadowsocks/config.json`</span><br><span class="line">sudo iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 8989 -j ACCEPT</span><br><span class="line">sudo iptables -I INPUT -p tcp --dport 54488 -j ACCEPT</span><br><span class="line">sudo iptables-save</span><br></pre></td></tr></table></figure>

<p>在Shadowsocks客户端添加服务器，如果你使用的是我提供的那个配置文件的话，地址填写你的IPv4地址或IPv6地址，端口号为8388，加密方法为aes-256-cfb，密码为你设置的密码。然后设置客户端使用全局模式，浏览器登录Google试试应该能直接打开了。<br>这时浏览器登录<a href="http://ip138.com/就会显示Shadowsocks服务器的IP啦！" target="_blank" rel="noopener">http://ip138.com/就会显示Shadowsocks服务器的IP啦！</a><br>测试完毕，按Ctrl + C关闭Shadowsocks。</p>
<h1 id="配置Systemd管理Shadowsocks"><a href="#配置Systemd管理Shadowsocks" class="headerlink" title="配置Systemd管理Shadowsocks"></a>配置Systemd管理Shadowsocks</h1><p>新建Shadowsocks管理文件<br><code>sudo nano /etc/systemd/system/shadowsocks-server.service</code><br>内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks Server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/local/bin/ssserver -c /etc/shadowsocks/config.json</span><br><span class="line">Restart=on-abort</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<p>Ctrl + O保存文件，Ctrl + X退出。<br>启动Shadowsocks：<br><code>sudo systemctl start shadowsocks-server</code><br>设置开机启动Shadowsocks：<br><code>sudo systemctl enable shadowsocks-server</code><br>至此，Shadowsock服务器端的基本配置已经全部完成了！<br>查看服务状态及日志：<br><code>systemctl status shadowsocks-server</code><br>使用journalctl查看日志：可以使用–since和–until选项过滤任意时间限制，这些限制分别显示给定时间之前或之后的条目。要显示特定数量的记录，大家可以使用-n选项。也许最有用的过滤方式是你感兴趣的单位。我们可以使用这个-u选项来过滤。例如，查看httpd服务的日志信息journalctl -u httpd.service</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u shadowsocks-server --since yesterday</span><br><span class="line">journalctl -u shadowsocks-server --since &quot;2017-03-01&quot;</span><br><span class="line">journalctl -u shadowsocks-server –n 20</span><br></pre></td></tr></table></figure>
<h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>这部分属于进阶操作，在你使用Shadowsocks时感觉到延迟较大，或吞吐量较低时，可以考虑对服务器端进行优化。</p>
<h2 id="开启BBR"><a href="#开启BBR" class="headerlink" title="开启BBR"></a>开启BBR</h2><p>BBR系Google最新开发的TCP拥塞控制算法，目前有着较好的带宽提升效果，甚至不比老牌的锐速差。<br>BBR在Linux kernel 4.9引入。</p>
<h2 id="优化吞吐量"><a href="#优化吞吐量" class="headerlink" title="优化吞吐量"></a>优化吞吐量</h2><p>新建配置文件：<br><code>sudo nano /etc/sysctl.d/local.conf</code><br>复制粘贴：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># max open files</span><br><span class="line">fs.file-max = 51200</span><br><span class="line"># max read buffer</span><br><span class="line">net.core.rmem_max = 67108864</span><br><span class="line"># max write buffer</span><br><span class="line">net.core.wmem_max = 67108864</span><br><span class="line"># default read buffer</span><br><span class="line">net.core.rmem_default = 65536</span><br><span class="line"># default write buffer</span><br><span class="line">net.core.wmem_default = 65536</span><br><span class="line"># max processor input queue</span><br><span class="line">net.core.netdev_max_backlog = 4096</span><br><span class="line"># max backlog</span><br><span class="line">net.core.somaxconn = 4096</span><br><span class="line"></span><br><span class="line"># resist SYN flood attacks</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line"># reuse timewait sockets when safe</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line"># turn off fast timewait sockets recycling</span><br><span class="line">net.ipv4.tcp_tw_recycle = 0</span><br><span class="line"># short FIN timeout</span><br><span class="line">net.ipv4.tcp_fin_timeout = 30</span><br><span class="line"># short keepalive time</span><br><span class="line">net.ipv4.tcp_keepalive_time = 1200</span><br><span class="line"># outbound port range</span><br><span class="line">net.ipv4.ip_local_port_range = 10000 65000</span><br><span class="line"># max SYN backlog</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 4096</span><br><span class="line"># max timewait sockets held by system simultaneously</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 5000</span><br><span class="line"># turn on TCP Fast Open on both client and server side</span><br><span class="line">net.ipv4.tcp_fastopen = 3</span><br><span class="line"># TCP receive buffer</span><br><span class="line">net.ipv4.tcp_rmem = 4096 87380 67108864</span><br><span class="line"># TCP write buffer</span><br><span class="line">net.ipv4.tcp_wmem = 4096 65536 67108864</span><br><span class="line"># turn on path MTU discovery</span><br><span class="line">net.ipv4.tcp_mtu_probing = 1</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure>
<p>运行：<br><code>sysctl --system</code><br>编辑之前的shadowsocks-server.service文件：<br><code>sudo nano /etc/systemd/system/shadowsocks-server.service</code><br>在ExecStart前插入一行，内容为：<br><code>ExecStartPre=/bin/sh -c &#39;ulimit -n 51200&#39;</code><br>即修改后的shadowsocks-server.service内容为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks Server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStartPre=/bin/sh -c &apos;ulimit -n 51200&apos;</span><br><span class="line">ExecStart=/usr/local/bin/ssserver -c /etc/shadowsocks/config.json</span><br><span class="line">Restart=on-abort</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<p>Ctrl + O保存文件，Ctrl + X退出。<br>重载shadowsocks-server.service：<br><code>sudo systemctl daemon-reload</code><br>重启Shadowsocks：<br><code>sudo systemctl restart shadowsocks-server</code></p>
<h2 id="开启TCP-Fast-Open"><a href="#开启TCP-Fast-Open" class="headerlink" title="开启TCP Fast Open"></a>开启TCP Fast Open</h2><p>TCP Fast Open可以降低Shadowsocks服务器和客户端的延迟。实际上在上一步已经开启了TCP Fast Open，现在只需要在Shadowsocks配置中启用TCP Fast Open。<br>编辑config.json：<br><code>sudo nano /etc/shadowsocks/config.json</code><br>将<code>fast_open</code>的值由<code>false</code>修改为<code>true</code>。Ctrl + O保存文件，Ctrl + X退出。<br>重启Shadowsocks：<br><code>sudo systemctl restart shadowsocks-server</code><br>注意：TCP Fast Open同时需要客户端的支持，即客户端Linux内核版本为3.7.1及以上；你可以在Shadowsocks客户端中启用TCP Fast Open。<br>至此，Shadowsock服务器端的优化已经全部完成了！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/VPS-Linux-BBR/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/VPS-Linux-BBR/" class="post-title-link" itemprop="url">Ubuntu内核开启BBR加速</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-02-02 19:00:00" itemprop="dateCreated datePublished" datetime="2017-02-02T19:00:00+08:00">2017-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 10:40:00" itemprop="dateModified" datetime="2019-11-23T10:40:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ubuntu内核开启BBR加速</p>
<h1 id="检查Ubuntu内核版本"><a href="#检查Ubuntu内核版本" class="headerlink" title="检查Ubuntu内核版本"></a>检查Ubuntu内核版本</h1><p>linux内核版本要高于4.9，才支持BBR，首先查看当前内核版本：<br><code>uname -r</code><br>4.12.4-041204-generic<br>如果内核版本不满足要求需要先升级并重启系统后检查内核是否成功升级：</p>
<h1 id="启用BBR"><a href="#启用BBR" class="headerlink" title="启用BBR"></a>启用BBR</h1><p>添加 <code>net.core.default_qdisc = fq</code> 和 <code>net.ipv4.tcp_congestion_control = bbr</code>到 <code>/etc/sysctl.conf</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sudo echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure>

<p>此时执行 <code>sysctl net.ipv4.tcp_available_congestion_control</code>，若返回结果为 <code>net.ipv4.tcp_available_congestion_control = bbr cubic reno</code> ，表示BBR模块开启成功。<br>然后使用 <code>sysctl -p</code> 命令让内核配置生效，不出意外，应该会提示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.core.default_qdisc = fq</span><br><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure>
<p>此时可以使用 <code>lsmod | grep bbr</code> 命令检查 BBR 是否已正确开启<br><code>lsmod | grep bbr</code><br>得到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Module                  Size  Used by</span><br><span class="line">tcp_bbr                16384  61</span><br></pre></td></tr></table></figure>
<p>如果出现 tcp_bbr 字样则说明没有问题。Used by下面的0，表示该模块可以随时卸载。卸载命令为<code>modprobe -r tcp_bbr</code><br>查看模块详细信息：<br><code>modinfo tcp_bbr</code><br>filename:       /lib/modules/4.12.4-041204-generic/kernel/net/ipv4/tcp_bbr.ko<br>description:    TCP BBR (Bottleneck Bandwidth and RTT)<br>license:        Dual BSD/GPL<br>author:         Soheil Hassas Yeganeh<br>author:         Yuchung Cheng <a href="mailto:&#x79;&#x63;&#x68;&#101;&#x6e;&#x67;&#x40;&#x67;&#x6f;&#111;&#x67;&#108;&#101;&#x2e;&#x63;&#x6f;&#109;">&#x79;&#x63;&#x68;&#101;&#x6e;&#x67;&#x40;&#x67;&#x6f;&#111;&#x67;&#108;&#101;&#x2e;&#x63;&#x6f;&#109;</a><br>author:         Neal Cardwell<br>author:         Van Jacobson<br>srcversion:     3D237D080AC188DD9000A9A<br>depends:<br>intree:         Y<br>vermagic:       4.12.4-041204-generic SMP mod_unload</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/VPS-iptables/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/VPS-iptables/" class="post-title-link" itemprop="url">Ubuntu Server Iptables 简单实例配置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-02-01 20:00:00" itemprop="dateCreated datePublished" datetime="2017-02-01T20:00:00+08:00">2017-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 10:42:00" itemprop="dateModified" datetime="2019-11-23T10:42:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ubuntu Server Iptables 简单实例配置</p>
<p>先查看本机配置<br><code>sudo iptables –L -n</code><br>如要重新配置，则先清除已有配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables –F     # 清除预设表filter中的所有规则链的规则     </span><br><span class="line">sudo iptables –X     # 清除预设表filter中使用者自定链中的规则</span><br></pre></td></tr></table></figure>
<p>如果是远程通过ssh连接服务器进行配置，则先加入允许ssh的规则<br><code>sudo iptables –A INPUT –p tcp –dport 22 –j ACCEPT</code><br>设定预设规则，DROP掉INPUT链与FORWARD链</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -P INPUT DROP     </span><br><span class="line">sudo iptables -P FORWARD DROP</span><br></pre></td></tr></table></figure>
<p>INPUT链规则配置<br>允许来自于lo接口的数据访问本机<br><code>sudo iptables -A INPUT -i lo -j ACCEPT</code><br> lo：loopback，回环接口，通常对应的IP地址为127.0.0.1（未开启之前，本机不能ping通本机）<br>允许icmp包通过,也就是允许ping<br><code>sudo iptables -A INPUT -p icmp -j ACCEPT</code><br>开启web服务端口<br><code>sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT</code><br>FORWARD链规则配置 g<br>开启转发功能,(在做NAT时,FORWARD默认规则是DROP时,必须做)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT    </span><br><span class="line">sudo iptables -A FORWARD -i eth1 -o eh0 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>丢弃坏的TCP包<br><code>sudo iptables -A FORWARD -p TCP ! --syn -m state --state NEW -j DROP</code><br>处理IP碎片数量,防止攻击,允许每秒100个<br><code>sudo iptables -A FORWARD -f -m limit --limit 100/s --limit-burst 100 -j ACCEPT</code><br>限制ICMP,允许每秒1个包,限制触发条件是10个包<br><code>sudo iptables -A FORWARD -p icmp -m limit --limit 1/s --limit-burst 10 -j ACCEPT</code><br>保存及调用<br><code>iptables-save &gt; /etc/iptables.rules # 可能需要切换至root用户</code><br>重启后会失效，重新调用配置<br><code>sudo iptables-restore &lt; /etc/iptables.rules</code><br>设置自动保存与调用<br><code>sudo nano /etc/network/interfaces</code><br>在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auto ath0  </span><br><span class="line">iface ath0 inet dhcp</span><br></pre></td></tr></table></figure>
<p>后面加上 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Auto save and restore iptables rules  </span><br><span class="line">pre-up iptables-restore &lt; /etc/iptables.rules  </span><br><span class="line">post-down iptables-save &gt; /etc/iptables.rules</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/VPS-PPTP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/VPS-PPTP/" class="post-title-link" itemprop="url">Ubuntu16.04 搭建VPN服务</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-02-01 19:00:00" itemprop="dateCreated datePublished" datetime="2017-02-01T19:00:00+08:00">2017-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 10:40:00" itemprop="dateModified" datetime="2019-11-23T10:40:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ubuntu16.04 搭建VPN服务</p>
<h1 id="1-安装PPTP，以用来提供VPN服务"><a href="#1-安装PPTP，以用来提供VPN服务" class="headerlink" title="1. 安装PPTP，以用来提供VPN服务."></a>1. 安装PPTP，以用来提供VPN服务.</h1><p><code>sudo apt update &amp;&amp; sudo apt upgrade &amp;&amp; sudo apt autoremove</code><br><code>sudo apt install pptpd</code><br>如果有问题的话比如提示找不到之类的，apt update 一下应该就可以了，然后再来一次就会自动完成安装。</p>
<h1 id="2-装好了之后我们需要进行配置一下以让它可以使用"><a href="#2-装好了之后我们需要进行配置一下以让它可以使用" class="headerlink" title="2. 装好了之后我们需要进行配置一下以让它可以使用."></a>2. 装好了之后我们需要进行配置一下以让它可以使用.</h1><p><code>sudo nano /etc/pptpd.conf</code><br>取消掉以下 2 行的注释并修改为自己设置的vpn网段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">localip 219.224.167.201</span><br><span class="line">remoteip 192.168.150.234-238</span><br></pre></td></tr></table></figure>
<p>分别是通过VPN连接后主机和客户端所使用的IP，可以自行修改。注意这个IP在下面还会用的到。</p>
<h1 id="3-然后我们需要分配账号给自己使用"><a href="#3-然后我们需要分配账号给自己使用" class="headerlink" title="3. 然后我们需要分配账号给自己使用."></a>3. 然后我们需要分配账号给自己使用.</h1><p><code>sudo nano /etc/ppp/chap-secrets</code><br>这个是用户列表文件，在里面添加账户按如下格式<br><code>“username” pptpd &quot;password&quot; *</code><br>username为你的用户名，password为你的密码，用引号引起,最后的*号表示允许在任意IP连接到服务</p>
<h1 id="4-DNS设置"><a href="#4-DNS设置" class="headerlink" title="4. DNS设置"></a>4. DNS设置</h1><p><code>sudo nano /etc/ppp/pptpd-options</code><br>找到ms-dns，取消掉注释，改成你喜欢的DNS比如8.8.8.8,8.8.4.4</p>
<h1 id="5-开启内核IP转发"><a href="#5-开启内核IP转发" class="headerlink" title="5. 开启内核IP转发"></a>5. 开启内核IP转发</h1><p>连接了之后会发现还访问不了外网，如果是需要连接内网的vpn，可以不需要这一步操作。需要让他能访问外网。<br><code>sudo nano /etc/sysctl.conf</code><br>取消掉 <code>net.ipv4.ip_forward=1</code> 这一行的注释，然后执行<br><code>sudo sysctl -p</code><br>使修改后的文件配置立即生效。</p>
<h1 id="6-然后我们需要安装iptables，用来实现请求的NAT转发"><a href="#6-然后我们需要安装iptables，用来实现请求的NAT转发" class="headerlink" title="6. 然后我们需要安装iptables，用来实现请求的NAT转发"></a>6. 然后我们需要安装iptables，用来实现请求的NAT转发</h1><p><code>sudo apt install iptables</code><br>然后开启NAT转发.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -F</span><br><span class="line">sudo iptables -t nat -A POSTROUTING -s 172.21.5.0/24 -o ens3 -j MASQUERADE</span><br><span class="line">sudo iptables -t nat -A POSTROUTING -s 192.168.150.0/24 -o br0 -j MASQUERADE (如果有虚拟网桥br0的话)</span><br><span class="line">iptables-save</span><br></pre></td></tr></table></figure>
<p>192.168.150.0/24是你在上面设置的IP段，让这个段转发，注意eth0是你连接外网的那块网卡，不一定是0也有可能是1或者看你的机器哪块网卡连的外网了。这样就以NAT的方式请求外网的东西了。不知道你的机器哪块网卡连的外网的话ifconfig一下看看哪个网卡是外网IP就知道了。</p>
<h1 id="7-最后，我们需要重启服务，让配置生效"><a href="#7-最后，我们需要重启服务，让配置生效" class="headerlink" title="7. 最后，我们需要重启服务，让配置生效 ."></a>7. 最后，我们需要重启服务，让配置生效 .</h1><p><code>sudo service pptpd restart</code><br>现在你已经可以连接到VPN获取内网150网段的地址了。<br>设置让脚本开机自动启动<br><code>systemctl enable pptpd.service</code></p>
<h1 id="8-查看有没有人连接该vpn"><a href="#8-查看有没有人连接该vpn" class="headerlink" title="8. 查看有没有人连接该vpn:"></a>8. 查看有没有人连接该vpn:</h1><p><code>netstat -anpt|grep pptpd</code><br>或者<br>ifconfig 也能看出有ppp0/ppp1等。</p>
<p>======================================================</p>
<h1 id="9-ubuntu-16-04客户端连接："><a href="#9-ubuntu-16-04客户端连接：" class="headerlink" title="9. ubuntu 16.04客户端连接："></a>9. ubuntu 16.04客户端连接：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install pptp-linux binutils # 安装PPTP-VPN拨号客户端</span><br><span class="line">sudo pptpsetup –-create testvpn –-server 219.224.167.172 –-username user -–password pass –-encrypt -–start # 创建拨号连接</span><br></pre></td></tr></table></figure>
<p>–create后的是创建的连接名称，可以为任意名称;<br>–server后接的是vpn服务器的IP;<br>–username是用户名<br>–password是密码，在这也可以没这个参数，命令稍后会自动询问。这样可以保证账号安全<br>–encrypt是表示需要加密，不必指定加密方式，命令会读取配置文件中的加密方式<br>–start是表示创建连接完后马上连接，如果你不想连，就不写 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pon testvpn ＃&lt;--VPN的连接名称&quot;</span><br><span class="line">poff ＃&lt;--断开VPN连接</span><br></pre></td></tr></table></figure>
<p>当连接成功后输入<code>ifconfig</code>命令会出现如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ppp0 Link encap:点对点协议</span><br><span class="line">inet 地址:172.16.36.2 点对点:172.16.36.1 掩码:255.255.255.255</span><br><span class="line">UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1496 跃点数:1</span><br><span class="line">接收数据包:7 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">发送数据包:7 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">碰撞:0 发送队列长度:3</span><br><span class="line">接收字节:70 (70.0 B) 发送字节:76 (76.0 B)</span><br></pre></td></tr></table></figure>
<p>添加网关路由，让流量走VPN<br>从第3步可以看出，新增虚拟接口为ppp0,VPN的网关为172.16.36.1<br>在文件<code>/etc/ppp/ip-up</code>加入该网关。（此文件在VPN拨号成功后会默认调用该脚本，所以加在此文件中不需要手动添加）<br><code>route add default gw 172.16.36.1</code><br>也可以在终端手动敲入上面命令：<br><code>sudo route add default gw 172.16.36.1</code><br>删除原有默认网关路由<br>通过sudo route命令可以查看本机中已经添加的路由。<br>找到对应的路由，假设我这里还有一条路由是192.168.0.1使用以下命令进行删除之：<br><code>sudo route del default gw 192.168.0.1</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/VPS-SSH-Putty/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/VPS-SSH-Putty/" class="post-title-link" itemprop="url">设置Putty SSH使用密钥登录Linux VPS主机</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-12-01 00:00:00" itemprop="dateCreated datePublished" datetime="2016-12-01T00:00:00+08:00">2016-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 09:46:39" itemprop="dateModified" datetime="2019-11-23T09:46:39+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>设置Putty SSH使用密钥登录Linux VPS主机</p>
<h1 id="1、生成密钥"><a href="#1、生成密钥" class="headerlink" title="1、生成密钥"></a>1、生成密钥</h1><p>看到很多教程有提到用puttygen.exe文件可以生成密钥的，但是可能会出现Server refused our key这样的登陆错误，所以我们这里直接使用VPS远程设置密钥，然后下载到本地。<br> <img alt data-src="/img/2016/VPS-Putty-1.jpg" class="lazyload"><br>根据上图的演示，登陆到SSH之后，我们先输入<code>ssh-keygen -t rsa</code> 然后会要求我们确定 路径我们直接回车会自动创建/root/.ssh文件夹目录，然后回车后出入密钥密码，输入两次继续回车密钥就可以在目录中看到。<br>我们把root/.ssh目录中的id_rsa和id_rsa.pub下载到本地备份等会需要使用。</p>
<h1 id="2、修改sshd配置文件"><a href="#2、修改sshd配置文件" class="headerlink" title="2、修改sshd配置文件"></a>2、修改sshd配置文件</h1><p>A - 将root/.ssh中的id_rsa.pub修改名字为authorized_keys 并且用<code>chmod 600 authorized_keys</code>设置权限。<br>.ssh目录权限一般为755或者700。rsa_id.pub 及authorized_keys权限一般为644。rsa_id权限必须为600<br>B - 找到/etc/ssh/sshd_config ，把RSAAuthentication和PubkeyAuthentication两行前面的#注释去掉。<br>C - 重启SSHD服务。<br><code>service sshd restart</code><br>Debian/Ubuntu执行：<code>/etc/init.d/ssh restart</code><br>CentOS执行：<code>/etc/init.d/sshd restart</code></p>
<h1 id="3、客户端配置密钥"><a href="#3、客户端配置密钥" class="headerlink" title="3、客户端配置密钥"></a>3、客户端配置密钥</h1><p>我们打开puttygen.exe文件，载入密钥。<br>  <img alt data-src="/img/2016/VPS-Putty-2.jpg" class="lazyload"><br>输入在SSH中设置的密钥密码。<br> <img alt data-src="/img/2016/VPS-Putty-3.jpg" class="lazyload"><br>保存私钥。<br> <img alt data-src="/img/2016/VPS-Putty-4.jpg" class="lazyload"><br>保存的文件名可以设置为id_rsa.ppk，也可以自定义名字但后缀必须是PPK，后面我们有需要用到。</p>
<h1 id="4、设置PUTTY认证链接"><a href="#4、设置PUTTY认证链接" class="headerlink" title="4、设置PUTTY认证链接"></a>4、设置PUTTY认证链接</h1><p> <img alt data-src="/img/2016/VPS-Putty-5.jpg" class="lazyload"><br>正常的登陆，开始可能需要我们输入密钥密码。<br> <img alt data-src="/img/2016/VPS-Putty-6.jpg" class="lazyload"></p>
<h1 id="5、再次修改SSHD配置文件"><a href="#5、再次修改SSHD配置文件" class="headerlink" title="5、再次修改SSHD配置文件"></a>5、再次修改SSHD配置文件</h1><p>修改/etc/ssh/sshd_config 文件中找到PasswordAuthentication后面的yes改成no<br>然后重启sshd<br><code>service sshd restart</code><br>这样我们的putty登陆使用密钥也配置完成，即便他们知道我们的ROOT密码也不好登陆，所以到本地的几个文件需要确保安全，只要你本机电脑安全，你的VPS就相对足够的安全。<br>#　6、SSH Tunnel转发配置文件<br><img alt data-src="/img/2016/VPS-Putty-7.jpg" class="lazyload"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/VPS-SSH/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/VPS-SSH/" class="post-title-link" itemprop="url">修改VPS的SSH端口</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-12-01 00:00:00" itemprop="dateCreated datePublished" datetime="2016-12-01T00:00:00+08:00">2016-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-23 09:40:00" itemprop="dateModified" datetime="2019-11-23T09:40:00+08:00">2019-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>修改VPS的SSH端口<br><code>apt update &amp;&amp; apt upgrade &amp;&amp; apt autoremove</code><br>主要是安全原因。Linux默认SSH端口是22，使用默认端口，使你的主机暴露在暴力破解密码的风险中。而且，有一些VPS供应商同样出于安全考虑，如果发现你的VPS有遭受SSH暴力破解的嫌疑，会主动暂停服务，带来不必要的麻烦。</p>
<h1 id="1、修改配置文件，增加新的SSH端口"><a href="#1、修改配置文件，增加新的SSH端口" class="headerlink" title="1、修改配置文件，增加新的SSH端口"></a>1、修改配置文件，增加新的SSH端口</h1><p>修改配置文件<br><code>nano /etc/ssh/sshd_config</code><br>在Port 22后另起一行，增加新的SSH端口。新端口推荐万位，如32234。此时，两个端口（默认22和新端口332234）都可使用。<br>注意，此时仍要保留22端口可用。是为了避免新端口因为某些原因不能登录，至少还保留有22端口可以登录。</p>
<h1 id="2、重启SSH"><a href="#2、重启SSH" class="headerlink" title="2、重启SSH"></a>2、重启SSH</h1><p>在shell里输入命令<br><code>service ssh restart</code></p>
<h1 id="3、使用新的端口登录"><a href="#3、使用新的端口登录" class="headerlink" title="3、使用新的端口登录"></a>3、使用新的端口登录</h1><p>使用新端口登录，需重新验证。</p>
<h1 id="4、注释掉默认端口"><a href="#4、注释掉默认端口" class="headerlink" title="4、注释掉默认端口"></a>4、注释掉默认端口</h1><p>如果使用新端口登录没有问题，可以修改配置文件 /etc/ssh/sshd_config，使用#号注释掉默认端口22并再次重启SSH服务。</p>
<h1 id="5、补充部分"><a href="#5、补充部分" class="headerlink" title="5、补充部分"></a>5、补充部分</h1><p>一般的上面2步骤就完毕，但是有些时候为了确保还需要设定防火墙是否开启。这样才能确保万无一失，我们可以用<code>iptables -L -n</code>检查端口是否开启。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 44488 -j ACCEPT</span><br><span class="line">iptables-save</span><br></pre></td></tr></table></figure>
<p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/Tear-Down-Canon-EF50-F1.8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Huang Sheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HSDS123">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2013/Tear-Down-Canon-EF50-F1.8/" class="post-title-link" itemprop="url">佳能EF50 F1.8小痰盂拆解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2013-04-08 00:00:00" itemprop="dateCreated datePublished" datetime="2013-04-08T00:00:00+08:00">2013-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-22 21:24:00" itemprop="dateModified" datetime="2019-11-22T21:24:00+08:00">2019-11-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>昨天发现我的小痰盂镜头前组镜片松动了，一看保修期刚过一个月，而作为一个工科男基本的动手能力还是要有的，遂决定拆之。<br>先上拆后的图片<br><img alt data-src="/img/2013/Canon_8258.jpg" class="lazyload"><br>下面开始拆机的过程。<br>首先，这是一个完整的镜头<br><img alt data-src="/img/2013/Canon_8233.jpg" class="lazyload"><br>然后，拧下镜头电子触点侧面的两个螺丝<br><img alt data-src="/img/2013/Canon_8234.jpg" class="lazyload"><br>然后把电子触点按下去，就可以把后挡板拆掉，露出镜头内部的线路板了。<br><img alt data-src="/img/2013/Canon_8236.jpg" class="lazyload"><br>然后，把AF/MF的面板拆下来（忘了拍照了，<a href="https://farm8.staticflickr.com/7277/7557738316_ea5d213596_b.jpg" target="_blank" rel="noopener">盗图一张</a>）<br><img alt data-src="/img/2013/Canon_7277_7557738316_ea5d213596_b.jpg" class="lazyload"><br>再拆下AF/MF面板下面的对焦环限位螺丝，就可以把镜桶拆下来了，拆下后的镜头如下<br><img alt data-src="/img/2013/Canon_8239.jpg" class="lazyload"><br>到这里，部分拆解完毕。仔细看了一下镜头构造，发现对焦环所在的槽变宽了，然后觉得我也拿它没什么办法。原样装回，一试，镜头正常，问题依旧。<br><img alt data-src="/img/2013/Canon_8255.jpg" class="lazyload"></p>
<p>试好了以后，电脑显示器还显示的是网上的拆解图片，突然发现怎么我的镜头与图片上的有一点不一样呢<br><img alt data-src="/img/2013/Canon_1012.jpg" class="lazyload"><br>我记得我刚才拆了时仔细研究镜头构造的时候的这个间隙比图片中红框里的要大很多呢？？既然问题没解决，也发现了异常，再拆。\n再把这个图片中显示的两个卡扣拆下来，就可以分离前后镜组了。其实在这个时候只要把镜头的前后镜组按一下，那个间隙就合拢了，也就正常了。<a href="https://farm8.staticflickr.com/7261/7557734590_95fd8b58bd_b.jpg" target="_blank" rel="noopener">再借用一下图片</a>)<br><img alt data-src="/img/2013/Canon_7261_7557734590_95fd8b58bd_b.jpg" class="lazyload"><br>但是，既然都拆到这里了，为何不把前后镜组分开呢？稍微在那个缝隙里撬一下就可以把镜头前后分开了，分开后的镜头后组与光圈组件：<br><img alt data-src="/img/2013/Canon_8261.jpg" class="lazyload"><br><img alt data-src="/img/2013/Canon_8259.jpg" class="lazyload"><br>这做工，这塑料齿轮，我都无语了。<br>再来一张全家幅（前面最开始放上来的图片）<br><img alt data-src="/img/2013/Canon_8258.jpg" class="lazyload"><br>发现拆解的过程中还是很容易带入灰尘到中间的镜片上，因此我又用了好几张擦镜纸去擦中间的镜片表面，越擦油污越多………………<br>后来网上查了查，有人说用屏幕清洁剂带的3M魔术布去擦，不会留下灰尘。手头正好有一瓶液晶屏幕清洁剂，心想反正也是最低端的镜头，心一横，干脆直接喷点清洁剂擦一下。竟然发现油污没了！<br>擦了好几遍，装上去看看，一切正常，开始遇到的前组镜片松动的问题也没了。试拍了几张照片<br><img alt data-src="/img/2013/Canon_8264.jpg" class="lazyload"><br>仔细看，最大光圈下怎么有很严重的色散现象，绿边很严重，紫边也有……………………<br>100%截图<br><img alt data-src="/img/2013/Canon_dispersion.jpg" class="lazyload"><br>是不是由于我擦的太多导致镀膜损坏？抑或是清洁剂的化学成分腐蚀镀膜？<br>网上查了一下，色散好像与镀膜也没啥关系，镀膜是为了防止眩光、鬼影的…………<br>求专业人士解答。<br>更新：早上再拍了几张试了一下，好像比昨天好了那么一点点（当然也还存在并且严重着），难道是昨天晚上3点的光线问题，再加上键盘自身的特点导致？<br><img alt data-src="/img/2013/Canon_8287.jpg" class="lazyload"><br>100%截图<br><img alt data-src="/img/2013/Canon_dispersion1.jpg" class="lazyload"><br><img alt data-src="/img/2013/Canon_dispersion2.jpg" class="lazyload"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Huang Sheng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Huang Sheng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
